apiVersion: v1
kind: Template
metadata:
  creationTimestamp: null
  name: datavolume-integration-template
objects:
- apiVersion: ${VM_APIVERSION}
  kind: VirtualMachineInstance
  metadata:
    creationTimestamp: null
    labels:
      special: ${VM_NAME}
    name: ${VM_NAME}
  spec:
    domain:
      devices:
        disks:
        - disk:
            bus: virtio
          name: disk1
          volumeName: volume1
      machine:
        type: ""
      resources:
        requests:
          memory: 64M
    terminationGracePeriodSeconds: 0
    volumes:
    - name: volume1
      dataVolume:
        name: ${DATAVOLUME_NAME}
parameters:
- name: VM_APIVERSION
- name: VM_NAME
- name: DATAVOLUME_NAME